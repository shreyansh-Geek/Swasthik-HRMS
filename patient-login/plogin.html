<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="plogin.css">
</head>
<body>

    <!-- Top Navigation Bar -->
    <header>
        <div class="container navbar">
            <div class="navbar-left">
                <div class="navbar-brand">
                    Smart HRMS
                </div>
            </div>
            <div class="navbar-right">
                <a href="../Landing-page/landing.html" class="navbar-link features">Back</a>
                <a href="./plogin.html" class="navbar-link">Patient Login</a>
                <a href="#" class="navbar-link hospital">Hospital Login</a>
            </div>
            <div class="navbar-toggle" id="navbar-toggle">
                <span class="navbar-toggle-icon"></span>
                <span class="navbar-toggle-icon"></span>
                <span class="navbar-toggle-icon"></span>
            </div>
        </div>
    </header>

    <div class="plogin-container">
        <div class="plogin-card">
            <div class="plogin-form">
                <h1>Login</h1>
                <form id="ploginForm">
                    <div class="form-group">
                        <label for="username">Username / E-mail</label>
                        <input type="email" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    
                    <div class="options-group">
                        <div class="options">
                            <a href="#" class="forgot-password">Forgot Password?</a>
                        </div>
                        <div class="options">
                            <a href="../patient-signup/psignup.html" class="dont-have-account">Don't have an account?</a>
                        </div>
                    </div>
    
                    <div class="button-group">
                        <button type="submit" class="login-button"><strong>Login</strong></button>
                        <a href="../patient-signup/psignup.html" class="signup-button"><strong>Sign Up</strong></a>
                    </div>

                    <p id="loginError" style="color:red;"></p> <!-- Error message -->
                    
                </form>
            </div>
            <div>
                <img class="plogin-img" src="./plogin.png" alt="Login Image">
            </div>
        </div>
    </div>

    <script src="plogin.js"></script>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBlLLPvziy_omkGwlaxsbtS8Kb29637KmM",
            authDomain: "swasthik-sih.firebaseapp.com",
            projectId: "swasthik-sih",
            storageBucket: "swasthik-sih.appspot.com",
            messagingSenderId: "1046285450890",
            appId: "1:1046285450890:web:3c90cf995920b9eb0a3773",
            measurementId: "G-P2G3SYJF6B"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Get the form and inputs
        const form = document.getElementById('ploginForm');
        const emailInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('loginError');

        // Handle form submission
        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const email = emailInput.value;
            const password = passwordInput.value;

            try {
                await signInWithEmailAndPassword(auth, email, password);
                alert("Login successful!");
                window.location.replace('../patient-dashboard/pdash.html'); // Redirect to patient dashboard
            } catch (error) {
                loginError.textContent = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>
